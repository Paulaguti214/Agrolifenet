@using Agrolifenet.FrontEnd.Modelos
<BaseFormularioComponente NommbreFormulario="Crear Historial Clínico"
                          NommbreEncabezadoDetalle="Ver Ganado Registrado"
                          Modelo="historialClinicoGuardar_Actualizar"
                          TModelo="HistorialClinicoGuardarActualizar"
                          Ejecutar="GuardarHistorialClinico">
    <ContenidoFormulario>
        <div class="row">
            <div class="col">
                <div class="mb-3">
                    <label class="form-label"><strong>Usuario</strong></label>
                    <InputText @bind-Value="@historialClinicoGuardar_Actualizar.NombreUsuario" class="form-control"
                               readonly="" />
                </div>
            </div>
            <div class="col">
                <div class="mb-3">
                    <label class="form-label" for="email"><strong># de chip</strong></label>
                    <CbxGanado IdGanado="historialClinicoGuardar_Actualizar.IdGanado" IdGanadoChanged="GanadoSeleccionado"></CbxGanado>
                    <ValidationMessage For="@(() => historialClinicoGuardar_Actualizar.IdGanado)" />
                </div>
            </div>
        </div>
        @if (ganadoDto is not null)
        {
            <div class="row">
                <div class="col">
                    <div class="mb-3">
                        <label class="form-label"><strong>Peso al nacer</strong></label>
                        <InputNumber @bind-Value="@historialClinicoGuardar_Actualizar.PesoalnacerHistorialClinico" class="form-control" readonly="" />
                        <ValidationMessage For="@(() => historialClinicoGuardar_Actualizar.PesoalnacerHistorialClinico)" />
                    </div>
                </div>
                <div class="col">
                    <div class="mb-3">
                        <label class="form-label"><strong>Peso actual</strong></label>
                        <div class="input-group">
                            <InputNumber class="form-control" @bind-Value:get="historialClinicoGuardar_Actualizar.PesoactualHistorialClinico" @bind-Value:set="CalcularPeso" />
                            <span class="input-group-text">Ganancia Peso</span>
                            <span class="input-group-text">@historialClinicoGuardar_Actualizar.GananciadepesodiariaHistorialClinico</span> <span class="input-group-text">Libras(s)</span>
                        </div>
                        <ValidationMessage class="validation-message" For="@(() => historialClinicoGuardar_Actualizar.PesoactualHistorialClinico)" />
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <div class="mb-3">
                        @if (ganadoDto.SexoGanado == Sexo.Hembra.ToString())
                        {
                            <div class="row">
                                <div class="col">
                                    <div class="mb-3">
                                        <label class="form-label">
                                            <strong>
                                                Numero de
                                                partos&nbsp;
                                            </strong>
                                        </label>
                                        <InputNumber class="form-control" @bind-Value="@historialClinicoGuardar_Actualizar.NumerodepartosHistorialClinico" />
                                        <ValidationMessage For="@(() => historialClinicoGuardar_Actualizar.NumerodepartosHistorialClinico)" />
                                    </div>
                                </div>
                            </div>
                        }
                        <div class="row">
                            <div class="col">
                                <div class="mb-3">
                                    <label class="form-label"><strong>Vacunas</strong></label>
                                    <InputTextArea class="form-control" @bind-Value="@historialClinicoGuardar_Actualizar.VacunaHistorialClinico" />
                                    <ValidationMessage For="@(() => historialClinicoGuardar_Actualizar.VacunaHistorialClinico)" />
                                </div>
                            </div>
                            <div class="col">
                                <div class="mb-3">
                                    <label class="form-label"><strong>Enfermedades</strong></label>
                                    <InputTextArea class="form-control" @bind-Value="@historialClinicoGuardar_Actualizar.EnfermedadesHistorialClinico" />
                                    <ValidationMessage For="@(() => historialClinicoGuardar_Actualizar.EnfermedadesHistorialClinico)" />
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col">
                                <div class="mb-3">
                                    <label class="form-label"><strong>resultado de pruebas</strong></label>
                                    <InputTextArea class="form-control" @bind-Value="@historialClinicoGuardar_Actualizar.ResultadodeExamenesHistorialClinico" />
                                    <ValidationMessage For="@(() => historialClinicoGuardar_Actualizar.ResultadodeExamenesHistorialClinico)" />
                                </div>
                            </div>
                            <div class="col">
                                <div class="mb-3">
                                    <label class="form-label"><strong>Desparasitantes</strong></label>
                                    <InputTextArea class="form-control" @bind-Value="@historialClinicoGuardar_Actualizar.InformaciondesparacitacionHistorialClinico" />
                                    <ValidationMessage For="@(() => historialClinicoGuardar_Actualizar.InformaciondesparacitacionHistorialClinico)" />
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col">
                                <div class="mb-3">
                                    <label class="form-label"><strong>Tratamientos</strong></label>
                                    <InputTextArea class="form-control" @bind-Value="@historialClinicoGuardar_Actualizar.TratamientoHistorialClinico" />
                                    <ValidationMessage For="@(() => historialClinicoGuardar_Actualizar.TratamientoHistorialClinico)" />
                                </div>
                            </div>
                            <div class="col">
                                <div class="mb-3">
                                    <label class="form-label">
                                        <strong>Estado de salud</strong>
                                    </label>
                                    <InputTextArea class="form-control" @bind-Value="@historialClinicoGuardar_Actualizar.EstadodesaludHistorialClinico" />
                                    <ValidationMessage For="@(() => historialClinicoGuardar_Actualizar.EstadodesaludHistorialClinico)" />
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col">
                                <div class="mb-3">
                                    <label class="form-label"><strong>Seguimiento</strong></label>
                                    <InputTextArea class="form-control" @bind-Value="@historialClinicoGuardar_Actualizar.SeguimientoHistorialClinico" />
                                    <ValidationMessage For="@(() => historialClinicoGuardar_Actualizar.SeguimientoHistorialClinico)" />
                                </div>
                            </div>
                            <div class="col">
                                <div class="mb-3">
                                    <label class="form-label"><strong>Observaciones</strong></label>
                                    <InputTextArea class="form-control" @bind-Value="@historialClinicoGuardar_Actualizar.ObservacionesHistorialClinico" />
                                    <ValidationMessage For="@(() => historialClinicoGuardar_Actualizar.ObservacionesHistorialClinico)" />
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col">
                                <div class="mb-3">
                                    <label class="form-label">
                                        <strong>Costo de tratamiento</strong>
                                    </label>
                                    <InputNumber class="form-control" @bind-Value="@historialClinicoGuardar_Actualizar.CostodeltratamientoHistorialClinico" />
                                    <ValidationMessage For="@(() => historialClinicoGuardar_Actualizar.CostodeltratamientoHistorialClinico)" />
                                </div>
                            </div>
                        </div>
                        <button class="btn btn-success btn-sm" type="submit">@(historialClinicoGuardar_Actualizar.IdHistorialClinico == 0? "Guardar":"Actualizar") Cambios</button>
                    </div>
                </div>
            </div>
        }
    </ContenidoFormulario>
    <ContenidoDetalle>
        @if (historialClinicos is not null)
        {
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6 text-nowrap">
                        <div id="dataTable_length-2" class="dataTables_length" aria-controls="dataTable">
                            <label class="form-label">
                                Mostrar&nbsp;
                                <select class="d-inline-block form-select form-select-sm">
                                    <option value="10" selected="">10</option>
                                    <option value="25">25</option>
                                    <option value="50">50</option>
                                    <option value="100">100</option>
                                </select>&nbsp;
                            </label>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="text-md-end dataTables_filter" id="dataTable_filter-2"><label class="form-label"><input type="search" class="form-control form-control-sm" aria-controls="dataTable" placeholder="Buscar"></label></div>
                    </div>
                </div>
                @if (historialClinicos == null)
                {
                    <p>Cargando datos...</p>
                }
                else if (historialClinicos.Any())
                {
                    <div class="table-responsive table mt-2" id="dataTable-3" role="grid" aria-describedby="dataTable_info">
                        <table class="table my-0" id="dataTable">
                            <thead>
                                <tr>
                                    <th># Historial</th>
                                    <th>Fecha Generacion</th>
                                    <th>Veterinario</th>                                   
                                    <th>Acciones</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var item in historialClinicos)
                                {
                                    <tr>
                                        <td>@item.IdHistorialClinico</td>
                                        <td>@item.FechaDeCreacionHistorialClinico<br></td>
                                        <td>@($"{item.NombreUsuario} {item.ApellidoUsuario}")<br></td>
                                        <td class="text-center"><a class="link-success me-2" @onclick="() => ActualizarHistorialClinico(item.IdHistorialClinico)"><i class="fa fa-edit"></i></a><a class="link-success link-primary" @onclick="() => EliminarHistorial(item.IdHistorialClinico)"><i class="fa fa-remove"></i></a></td>
                                    </tr>
                                }
                            </tbody>
                            <tfoot>
                                <tr></tr>
                            </tfoot>
                        </table>
                    </div>
                }

                <div class="row">
                    <div class="col-md-6 align-self-center">
                        <p id="dataTable_info-2" class="dataTables_info" role="status" aria-live="polite">Mostrando1 a 10 de 27</p>
                    </div>
                    <div class="col-md-6 d-flex justify-content-end align-items-center">
                        <nav class="dataTables_paginate paging_simple_numbers">
                            <ul class="pagination">
                                <li class="page-item disabled"><a class="page-link" href="#" aria-label="Previous"><span aria-hidden="true">«</span></a></li>
                                <li class="page-item active"><a class="page-link" href="#">1</a></li>
                                <li class="page-item"><a class="page-link" href="#">2</a></li>
                                <li class="page-item"><a class="page-link" href="#">3</a></li>
                                <li class="page-item"><a class="page-link" href="#" aria-label="Next"><span aria-hidden="true">»</span></a></li>
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>
        }

    </ContenidoDetalle>
</BaseFormularioComponente>